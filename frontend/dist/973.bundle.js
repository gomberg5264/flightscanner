(self.webpackChunkwebpack_react_setup=self.webpackChunkwebpack_react_setup||[]).push([[973],{6473:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var r=n(3038),a=n.n(r),c=n(5916),s=n(282),l=n(9895),o=n(7827),i=n(1073),u=n(381),p=n.n(u),f=n(5697),d=n.n(f),h=n(7294),g=n(8048),m=n(4586),v=n(5801),b=v.Z.SET_ALERT,w=v.Z.REMOVE_ALERT,y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500;return function(r){var a=(0,m.Z)();r({type:b,payload:{message:e,type:t,id:a}}),setTimeout((function(){return r({type:w,payload:a})}),n)}},E=n(7757),P=n.n(E),k=n(8926),S=n.n(k),x=n(4575),T=n.n(x),R=n(7193);p().locale("en-gb");var C=function e(){T()(this,e)};C.getPlaces=function(){var e=S()(P().mark((function e(t){var n,r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(R.CT,"autosuggest/v1.0/UK/GBP/en-GB/?query=").concat(t),{method:"GET",headers:R.zf});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(r=e.sent).Places){e.next=9;break}return e.abrupt("return",r);case 9:throw r;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),C.getFlights=function(){var e=S()(P().mark((function e(t){var n,r,a,c,s,l,o,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.fromPlace.id,r=t.toPlace.id,a=p()(t.departDate).format("YYYY-MM-DD"),c=p()(t.toDate).format("YYYY-MM-DD"),e.next=7,fetch("".concat(R.CT,"browsedates/v1.0/US/USD/en-US/").concat(n,"/").concat(r,"/").concat(a,"?inboundpartialdate=").concat(c),{method:"GET",headers:R.zf});case 7:return s=e.sent,e.next=10,s.json();case 10:if(!(l=e.sent).Quotes){e.next=15;break}for(o=[],i=0;i<l.Quotes.length;i+=1)o.push({places:l.Places[i],quotes:l.Quotes[i],carriers:l.Carriers[i]});return e.abrupt("return",o);case 15:throw l;case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();var Z=n(2497).Z.SAVE_SEARCH;const q=function(e){return function(t){t({type:Z,payload:e})}};var M=n(452),_=M.Z.GET_FLIGHTS_SUCCESS,D=M.Z.GET_FLIGHTS_FAIL,A=n(7301);var F=n(2822),O=n(998),j=n(5757),G=n(1120);const L=(0,G.Z)((function(){return{box:{position:"absolute",left:0,top:"100px",backgroundColor:"white",width:"auto",zIndex:2}}}));var N=function(e){var t=e.places,n=e.show,r=e.loading,a=e.handleClick;return t.length>0?t.map((function(e){var t=e.PlaceName,n=e.PlaceId;return h.createElement(O.Z,{button:!0,onClick:function(){return a(t,n)},key:n},h.createElement(j.Z,{primary:"".concat(t," (").concat(n,")")}))})):n?h.createElement(O.Z,null,r?"Searching...":"No results"):null},Y=function(e){var t=e.places,n=e.setPlace,r=e.setPlaces,a=e.show,c=e.loading,s=e.position,o=L();return h.createElement(l.Z,{className:o.box,style:{top:s.top,left:s.left}},h.createElement(F.Z,{component:"nav"},h.createElement(N,{places:t,show:a,loading:c,handleClick:function(e,t){n({name:e,id:t}),r([])}})))};Y.defaultProps={setPlace:null,position:{top:0,left:0}},N.propTypes={places:d().instanceOf(Array).isRequired,show:d().bool.isRequired,loading:d().bool.isRequired,handleClick:d().func.isRequired},Y.propTypes={places:d().instanceOf(Array).isRequired,setPlace:d().func,setPlaces:d().func.isRequired,show:d().bool.isRequired,loading:d().bool.isRequired,position:d().instanceOf(Object)};const I=Y;var U=function(e){var t=e.label,n=e.placeholder,r=e.selectedPlace,c=e.setSelectedPlace,s=(0,h.useState)(""),l=a()(s,2),o=l[0],i=l[1],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=(0,h.useState)(!1),r=a()(n,2),c=r[0],s=r[1],l=(0,h.useState)(null),o=a()(l,2),i=o[0],u=o[1],p=(0,h.useState)(!1),f=a()(p,2),d=f[0],g=f[1],m=(0,h.useState)([]),v=a()(m,2),b=v[0],w=v[1];return(0,h.useEffect)(S()(P().mark((function n(){var r;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>3&&e.length<100)||d){n.next=11;break}return s(!0),g(!0),setTimeout((function(){return g(!1)}),t),n.next=6,C.getPlaces(e);case 6:r=n.sent,s(!1),!r.message&&r.Places?w(r.Places):u("Something went wrong"),n.next=13;break;case 11:g(!1),w([]);case 13:case"end":return n.stop()}}),n)}))),[e]),i||[b,w,c]}(o),p=a()(u,3),f=p[0],d=p[1],g=p[2],m=r||null;if(m){var v=m,b=v.name,w=v.id;m="".concat(b," (").concat(w,")")}var y=(0,h.useRef)(null),E=(0,h.useState)({top:0,left:0}),k=a()(E,2),x=k[0],T=k[1],R=function(){var e=y.current.getBoundingClientRect(),t=e.top,n=e.left;T({top:t,left:n})};return(0,h.useEffect)((function(){return R(),window.addEventListener("resize",R),function(){return window.removeEventListener("resize",R)}}),[]),h.createElement(h.Fragment,null,h.createElement(A.Z,{ref:y,label:t,placeholder:n,InputLabelProps:{shrink:!0},value:m||o,onChange:function(e){c(null),i(e.target.value)}}),h.createElement(I,{places:f,setPlace:c,setPlaces:d,show:o.length>3&&!r,loading:g,position:x}))};U.defaultProps={selectedPlace:null,setSelectedPlace:null},U.propTypes={label:d().string.isRequired,placeholder:d().string.isRequired,selectedPlace:d().instanceOf(Object),setSelectedPlace:d().func};const z=U;var B=n(9713),H=n.n(B);const Q=(0,G.Z)((function(e){var t;return{paper:{marginTop:e.spacing(4)},form:(t={position:"inherit",display:"grid",gridGap:e.spacing(3),gridTemplateRows:"repeat(5, 1fr)",padding:e.spacing(4)},H()(t,e.breakpoints.up("md"),{display:"flex",alignItems:"center",justifyContent:"center"}),H()(t,"& > *",{flex:1,marginRight:e.spacing(1)}),H()(t,"& > :last-child",{marginRight:0}),t)}}));p().locale("en-gb");var V=function(e){var t=e.getFlights,n=e.setAlert,r=Q(),u=(0,h.useState)(p()()),f=a()(u,2),d=f[0],g=f[1],m=(0,h.useState)(p()()),v=a()(m,2),b=v[0],w=v[1],y=(0,h.useState)(null),E=a()(y,2),P=E[0],k=E[1],S=(0,h.useState)(null),x=a()(S,2),T=x[0],R=x[1],C={departDate:d,returnDate:b,fromPlace:P,toPlace:T};return h.createElement(l.Z,{className:r.paper},h.createElement("form",{className:r.form,noValidate:!0,autoComplete:"off"},h.createElement(z,{label:"From",placeholder:"Amsterdam",selectedPlace:P,setSelectedPlace:k}),h.createElement(z,{label:"To",placeholder:"Stockholm",selectedPlace:T,setSelectedPlace:R}),h.createElement(o.M,{utils:c.Z},h.createElement(i.M,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",label:"Depart",value:d,onChange:g}),h.createElement(i.M,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",label:"Return",value:b,onChange:w}),h.createElement(s.Z,{onClick:function(){P&&T?t(C):n("Please select a from and to place","warning")},variant:"contained",color:"primary",size:"large"},"Search flights"))))};V.propTypes={getFlights:d().func.isRequired,setAlert:d().func.isRequired};const K=(0,g.$j)(null,{getFlights:function(e){return function(){var t=S()(P().mark((function t(n){var r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.getFlights(e);case 3:if(!(r=t.sent).message){t.next=6;break}throw new Error(r.message);case 6:if(!r.errors){t.next=8;break}throw new Error(r.errors[0]);case 8:if(0!==r.length){t.next=10;break}throw new Error("No flights found");case 10:n({type:_,payload:r}),n(q(e)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),n({type:D,payload:{msg:t.t0.message,status:"error"}}),n(y(t.t0.message,"error"));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},setAlert:y})(V)},719:(e,t,n)=>{var r={"./it":7060,"./it-ch":150,"./it-ch.js":150,"./it.js":7060};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=719}}]);